<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FORMULAIRE</title>
  <style>
    body {
        font-family: 'Inter', Arial, sans-serif;
        background: #f4f6fb;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 0rem 1rem;
    }
    .form-container {
        background: #fff;
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 6px 18px rgba(0,0,0,0.1);
        width: 100%;
        max-width: 480px;
        position: relative;
    }
    h1 {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        text-align: center;
        color: #1e293b;
    }
    p {
        font-size: 1rem;
        color: #475569;
        text-align: center;
        margin-bottom: 1.5rem;
    }
    .step {
        display: none;
        animation: fade 0.4s ease;
    }
    .step.active { display: block; }
    
    @keyframes fade { from {opacity: 0;} to {opacity: 1;} }
    
    label {
        font-weight: 600;
        margin-top: 1rem;
        display: block;
        color: #1e293b;
    }
    
    input, textarea, select {
        width: 100%;
        padding: 0.8rem;
        margin-top: 0.6rem;
        box-sizing: border-box;
        border: 1px solid #cbd5e1;
        border-radius: 0.5rem;
        font-size: 1rem;
        outline: none;
    }

    textarea {
        font-family: 'Inter', Arial, sans-serif;
        height: 150px;
        resize: none;
    }

    button {
        margin-top: 1.5rem;
        width: 100%;
        padding: 0.9rem;
        background: #2563eb;
        color: #fff;
        font-size: 1rem;
        font-weight: bold;
        border: none;
        border-radius: 0.5rem;
        cursor: pointer;
        transition: background 0.2s;
    }

    button:hover { background: #1d4ed8; }

    .progress {
        height: 6px;
        background: #e2e8f0;
        border-radius: 6px;
        overflow: hidden;
        margin-bottom: 1.5rem;
    }
    .progress-bar {
        height: 100%;
        width: 0%;
        background: #2563eb;
        transition: width 0.3s ease;
    }
    .success {
        text-align: center;
        font-size: 1.1rem;
        color: #16a34a;
        display: none;
    }
  </style>
</head>
<body>
    <div class="form-container">
        <h1>üöÄ Aidez-nous √† cr√©er l‚Äôoutil parfait</h1>
        <p>Quelques questions rapides pour am√©liorer votre quotidien</p>

        <div class="progress"><div class="progress-bar" id="progressBar"></div></div>

        <form id="multiStepForm">
        <!-- Step 1 -->
        <div class="step active">
            <label>1. Quel est votre statut actuel ?</label>
            <select name="role" required>

            <option value="" disabled selected>-- S√©lectionnez --</option>
            <option value="Entrepreneur / Ind√©pendant">Entrepreneur / Ind√©pendant</option>
            <option value="freelance">Freelance</option>
            <option value="salarie">Salari√©</option>
            <option value="etudiant">√âtudiant</option>
            <option value="autre">Autre</option>
            
            </select>
        </div>

        <!-- Step 2 -->
        <div class="step">
            <label>2. Rencontrez-vous r√©guli√®rement une t√¢che r√©p√©titive ou chronophage dans votre activit√© ?</label>

            <select name="has_problem" id="hasProblem" required>
            <option value="" disabled selected>-- S√©lectionnez --</option>
            <option value="souvent">Oui, souvent</option>
            <option value="parfois">Oui, parfois</option>
            <option value="jamais">Non, jamais</option>
            </select>
        </div>

        <!-- Step 3 -->
        <div class="step">
            <label>3. Si oui, quelle est cette t√¢che ?</label>
            <textarea name="problem_detail"  placeholder="Ex. : faire mes factures √† la main, g√©rer mes rendez-vous, r√©pondre aux emails r√©p√©titifs..."></textarea>
        </div>

        <!-- Step 4 -->
        <div class="step">
            <label>4. √Ä quelle fr√©quence cette t√¢che revient-elle ?</label>
            <select name="frequency" required>
            <option value="" disabled selected>-- S√©lectionnez --</option>
            <option value="quotidien">Tous les jours</option>
            <option value="hebdo">Chaque semaine</option>
            <option value="occasionnel">Occasionnellement</option>
            </select>
        </div>

        <!-- Step 5 -->
        <div class="step">
            <label>5. Comment g√©rez-vous cette t√¢che aujourd‚Äôhui ? (outils, m√©thodes, astuces...)</label>
            <textarea name="current_solution" required placeholder="Ex. : j‚Äôutilise Excel, je note dans un carnet, je d√©l√®gue, je ne fais rien pour l‚Äôinstant..."></textarea>
        </div>

        <!-- Step 6 -->
        <div class="step">
            <label>6. Quel budget seriez-vous pr√™t(e) √† investir pour une solution qui vous simplifie cette t√¢che ?</label>
            <select name="pricing" required>
            <option value="" disabled selected>-- Choisis --</option>
            <option value="0">0 ‚Ç¨ (je n‚Äôach√®terais pas)</option>
            <option value="<10">Moins de 10‚Ç¨/mois</option>
            <option value="10-30">10-30‚Ç¨/mois</option>
            <option value="30-50">30-50‚Ç¨/mois</option>
            <option value=">50">Plus de 50‚ÄØ‚Ç¨/mois</option>
            </select>
        </div>

        <!-- Step 7 -->
        <div class="step">
            <label>7. Souhaitez-vous √™tre inform√©(e) du lancement ? (facultatif)</label>
            <input type="email" name="email" placeholder="exemple@entreprise.com" />
        </div>

        <button type="button" id="nextBtn">Suivant</button>

        </form>

        <div id="successMessage" class="success">
            Merci ! Vous √™tes ajout√©(e) √† la b√™ta üöÄ
        </div>
    </div>

    <script>
        const form = document.getElementById('multiStepForm');
        const steps = document.querySelectorAll('.step');
        const nextBtn = document.getElementById('nextBtn');
        const progressBar = document.getElementById('progressBar');
        const successMessage = document.getElementById('successMessage');
        let currentStep = 0;

        function sendMessage(message) {
        const webhookURL = "https://discord.com/api/webhooks/1407994550156267521/m2_6P1m8bYW_-yi_3EgG06WLG-vINpuZSiBjztrdZeHO0QBsvEEIH0iKiNo3D4wmflxI" 

        fetch(webhookURL, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ content: message })
        }).then(response => {
            if(response.ok) {
            // console.log("Message envoy√© !");
            } else {
                console.error("Erreur :", response.status, response.statusText);
            }
        }).catch(err => console.error("Erreur r√©seau :", err));
        }

        function showStep(index) {
            steps.forEach((step, i) => step.classList.toggle('active', i === index));
            progressBar.style.width = ((index) / steps.length) * 100 + '%';
            nextBtn.textContent = (index === steps.length - 1) ? 'Envoyer' : 'Suivant';
        }

        nextBtn.addEventListener('click', () => {
        const inputs = steps[currentStep].querySelectorAll('input, textarea, select');

        for (let input of inputs) {
            if (!input.checkValidity()) {
                input.reportValidity();
                return;
            }
        }

        // Cas particulier : si l‚Äôutilisateur dit "jamais" √† la Q2, sauter directement √† l‚Äôemail
        if (steps[currentStep].querySelector('#hasProblem')) {
            const val = document.getElementById('hasProblem').value;
            if (val === 'jamais') {
                currentStep = steps.length - 1;  
                showStep(currentStep);
                return;
            }
        }

        if (currentStep < steps.length - 1) {
            currentStep++;
            showStep(currentStep);

        } else {
            const formData = new FormData(form)
            const infoForm = Object.fromEntries(formData.entries())

            sendMessage(JSON.stringify({
                role : infoForm.role, 
                probleme : infoForm.has_problem, 
                detail : infoForm.problem_detail,
                frequence : infoForm.frequency, 
                actuellement : infoForm.current_solution, 
                prix : infoForm.pricing, 
                email : infoForm.email
            }))
            
            form.style.display = 'none';
            successMessage.style.display = 'block';
            progressBar.style.width = '100%';
        }

        })

        showStep(currentStep)
    </script>
</body>
</html>
